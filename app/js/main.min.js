/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/src/js/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(1);


/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	// Canvas
	__webpack_require__(2);
	
	// User interaction elements
	__webpack_require__(3);


/***/ },
/* 2 */
/***/ function(module, exports) {

	// background contains the static canvas elements
	var background = document.getElementById("static");
	var backgroundContext = background.getContext("2d");
	
	// Settings for the background - move out to a separate file
	var settings = {
	    backgroundColor: "#8CD1E6",
	    pathColor: "gray"
	}
	
	// Drawing the background
	backgroundContext.fillStyle = settings.backgroundColor;
	backgroundContext.fillRect(0, 0, background.width, background.height);
	
	/* Main path will go from [0, 500], [75, 500], [75, 100], [225, 100], [225, 500], [375, 500], [375, 100], [525, 100], [525, 500], [675, 500], [675, 100], [825, 100], [825, 500], [900, 500] */
	
	// Drawing the path - width of the path is 50px
	backgroundContext.fillStyle = settings.pathColor;
	
	backgroundContext.beginPath();
	
	// For the bottom part of the path
	backgroundContext.moveTo(0, 525);
	
	backgroundContext.lineTo(100, 525);
	backgroundContext.lineTo(100, 125); // Top
	backgroundContext.lineTo(200, 125);
	backgroundContext.lineTo(200, 525); // Bottom
	backgroundContext.lineTo(400, 525);
	backgroundContext.lineTo(400, 125); // Top
	backgroundContext.lineTo(500, 125);
	backgroundContext.lineTo(500, 525); // Bottom
	backgroundContext.lineTo(700, 525);
	backgroundContext.lineTo(700, 125); // Top
	backgroundContext.lineTo(800, 125);
	backgroundContext.lineTo(800, 525); // Bottom
	
	//Middle section to the side
	backgroundContext.lineTo(900, 525);
	backgroundContext.lineTo(900, 475);
	backgroundContext.lineTo(850, 475);
	
	// For the top part of the path
	backgroundContext.lineTo(850, 75);
	backgroundContext.lineTo(650, 75);
	backgroundContext.lineTo(650, 475);
	backgroundContext.lineTo(550, 475);
	backgroundContext.lineTo(550, 75);
	backgroundContext.lineTo(350, 75);
	backgroundContext.lineTo(350, 475);
	backgroundContext.lineTo(250, 475);
	backgroundContext.lineTo(250, 75);
	backgroundContext.lineTo(50, 75);
	backgroundContext.lineTo(50, 475);
	
	// End section
	backgroundContext.lineTo(0, 475);
	
	backgroundContext.fill();
	// backgroundContext.lineTo();


/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	// Initiate all the components
	var Tower = __webpack_require__(4),
	    GameEngine = __webpack_require__(5),
	    game = new GameEngine;
	
	
	// HERE IS ALL THE INTERACTION EVENT LISTENERS
	
	/* ============== On start click handlers ==============*/
	/* =====================================================*/
	
	// On start, create a game element - these event listeners will be destroyed when the container is overriden
	document.getElementById("start-btn").addEventListener("click", function() {
	    // Hides the modal lightbox
	    document.getElementsByClassName("modal-content")[0].style.display = "none";
	    document.getElementsByClassName("modal-background")[0].style.display = "none";
	});
	
	// On clicking the information button, show the information panel
	document.getElementById("information-btn").addEventListener("click", function() {
	    console.log("show information container here");
	});
	
	/* ======== Information container interactions =========*/
	/* =====================================================*/
	
	
	
	/* ================= Information Hover =================*/
	/* =====================================================*/
	// Shows information about towers or monsters if hovered over
	// or active
	
	// Get information from towerdata.js
	
	/* ========== Tower Card Click and placements ==========*/
	/* =====================================================*/
	// Click a tower card and make "active" which can be placed on UI element
	// While it is active - use #dynamic.onmousemove = function -> to Send
	// information to the canvas
	
	// set up event listeners at the start which reference functions - these functions depend on the state on the application to control their control flow
	var activeTowerSelected = null;
	function towerCardClick() {
	
	    var towerName = this.getAttribute("data-tower");
	    // NOTE  add active class to active element
	
	    if (/disabled/i.test(this.className)) { // Tower is disabled
	        return;
	    } else if (activeTowerSelected === null) { // There is no active tower being placed
	        // set the active tower selected to be the tower name
	        // Set up active elements
	        activeTowerSelected = towerName;
	        // NOTE add active class to tower clicked
	    } else if (activeTowerSelected === towerName) { // The tower card clicked is the same as the active tower
	        cancelTowerPlacement();
	    } else { // There is an active tower which is not the same as what was clicked
	        // NOTE remove active class from previous tower`
	        activeTowerSelected = towerName;
	        // NOTE add active class to clicked tower card
	    }
	}
	
	function onTowerMouseMovement(e) {
	    if (activeTowerSelected === null) {
	        return
	    };
	    var canvasContainer = this.getBoundingClientRect();
	    var offsetX = e.clientX - canvasContainer.left,
	        offsetY = e.clientY - canvasContainer.top;
	    // send to display to get rendered
	};
	
	function towerPlacement(e) {
	    if (activeTowerSelected === null) {
	        return;
	    }
	
	    var towerName = activeTowerSelected, // NOTE CHANGE GET TOWER NAME FROM LIST
	        canvasContainer = this.getBoundingClientRect(),
	        position = {};
	
	    position.x = e.clientX - canvasContainer.left;
	    position.y = e.clientY - canvasContainer.top;
	
	    if (game.validateTowerPlacement(towerName, position)) {
	        console.log("towerPlaced");
	        game.addTower(towerName, position);
	    } else {
	        console.log("invalid tower placement");
	        // show error message somewhere for the user
	    }
	    activeTowerSelected = null;
	}
	
	function cancelTowerPlacement() {
	    // NOTE remove active tower card
	    activeTowerSelected = null;
	}
	
	
	// Set up event listeners
	var towerCards = document.getElementsByClassName("tower-card");
	// Convert from nodelist to array
	towerCards = Array.prototype.slice.call(towerCards);
	
	// Tower card click event listeners
	towerCards.map(function(towerCard) {
	    towerCard.addEventListener("click", towerCardClick);
	});
	
	// Game container event listeners
	document.getElementById("dynamic").onmousemove = onTowerMouseMovement;
	document.getElementById("dynamic").addEventListener("click", towerPlacement);
	
	// Tower placement cancelling event listeners
	document.onkeydown = function(e) {
	    if (e.keyCode === 27) {
	        cancelTowerPlacement();
	    }
	}


/***/ },
/* 4 */
/***/ function(module, exports) {

	var Tower = function(damage, speed, range, type, effect, position) {
	    this.damage = damage;
	    this.speed = speed; // Attack speed
	    this.range = range; // Range of the tower
	    this.type = type; // Type of damage
	    this.effect = effect; // Special effect (e.g. slow, splash, etc)
	    this.position = position; // object with x and y coordinates - should not change
	}
	// Method the game object uses to run towers
	Tower.prototype.runCycle = function() {
	
	}
	// change this to reference a list or something where a name can be used to determine the properties
	// Takes in a monster's position and checks whether that is in range based on the range - returns true or false if in range which can be used to
	Tower.prototype.checkInRange = function(monsterPosition) {
	
	}
	
	module.exports = Tower;


/***/ },
/* 5 */
/***/ function(module, exports) {

	var GameEngine = function() {
	    this.userGold = 10;
	    this.level = 1;
	    this.userLives = 30;
	    this.activeMonsters = {}; // List of active monsters in the
	    this.towers = {}; // object of tower objects
	
	    // Goes through and disables towers that can't be used yet
	}
	
	GameEngine.prototype.addMonster = function(name) {
	    // add monster (specified by name) to game
	}
	
	GameEngine.prototype.addTower = function(name, position) {
	    // add tower (specified by name) at location
	}
	
	// method to check gold before place tower or upgrade
	GameEngine.prototype.checkGold = function(goldCost) {
	    if (goldCost > this.userGold) {
	        return true;
	    } else {
	        return false;
	    }
	};
	
	GameEngine.prototype.gameOver = function() {
	
	}
	
	GameEngine.prototype.gameWon = function() {
	
	}
	
	// New level method
	GameEngine.prototype.nextLevel = function() {
	
	}
	
	GameEngine.prototype.render = function() {
	    // send state to the display object to render
	};
	
	GameEngine.prototype.runCycle = function() {
	    // loop through active monsters and towers and run the cycle
	    // Each runCycle method returns information for the gameEngine to
	    // process (e.g. the monster died, tower changed)
	
	    // loop and check death of monsters - update accordingly
	
	    // Send information to render
	}
	
	// method to upgrade tower
	
	GameEngine.prototype.validateTowerPlacement = function(name, position) {
	    // returns true or false whether tower placement is valid
	    return true;
	}
	
	// redraw canvas
	
	module.exports = GameEngine;


/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNDRlYTFiYWY0NzA1YTc5MTNjYjQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2VudHJ5LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9iYWNrZ3JvdW5kLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9pbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NsYXNzZXMvVG93ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NsYXNzZXMvR2FtZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUN0Q0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7O0FDSkE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG9DQUFtQztBQUNuQztBQUNBLG9DQUFtQztBQUNuQztBQUNBLG9DQUFtQztBQUNuQztBQUNBLG9DQUFtQztBQUNuQztBQUNBLG9DQUFtQztBQUNuQztBQUNBLG9DQUFtQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztBQzNEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxFQUFDOztBQUVEO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDRDQUEyQztBQUMzQztBQUNBLE1BQUsseUNBQXlDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSyw4Q0FBOEM7QUFDbkQ7QUFDQSxNQUFLLE9BQU87QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDekhBO0FBQ0E7QUFDQSx3QkFBdUI7QUFDdkIsd0JBQXVCO0FBQ3ZCLHNCQUFxQjtBQUNyQiwwQkFBeUI7QUFDekIsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7Ozs7OztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QixzQkFBcUI7O0FBRXJCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9zcmMvanMvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA0NGVhMWJhZjQ3MDVhNzkxM2NiNFxuICoqLyIsIi8vIENhbnZhc1xucmVxdWlyZShcIi4vYmFja2dyb3VuZC5qc1wiKTtcblxuLy8gVXNlciBpbnRlcmFjdGlvbiBlbGVtZW50c1xucmVxdWlyZShcIi4vaW50ZXJmYWNlLmpzXCIpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9qcy9lbnRyeS5qc1xuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIGJhY2tncm91bmQgY29udGFpbnMgdGhlIHN0YXRpYyBjYW52YXMgZWxlbWVudHNcbnZhciBiYWNrZ3JvdW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGF0aWNcIik7XG52YXIgYmFja2dyb3VuZENvbnRleHQgPSBiYWNrZ3JvdW5kLmdldENvbnRleHQoXCIyZFwiKTtcblxuLy8gU2V0dGluZ3MgZm9yIHRoZSBiYWNrZ3JvdW5kIC0gbW92ZSBvdXQgdG8gYSBzZXBhcmF0ZSBmaWxlXG52YXIgc2V0dGluZ3MgPSB7XG4gICAgYmFja2dyb3VuZENvbG9yOiBcIiM4Q0QxRTZcIixcbiAgICBwYXRoQ29sb3I6IFwiZ3JheVwiXG59XG5cbi8vIERyYXdpbmcgdGhlIGJhY2tncm91bmRcbmJhY2tncm91bmRDb250ZXh0LmZpbGxTdHlsZSA9IHNldHRpbmdzLmJhY2tncm91bmRDb2xvcjtcbmJhY2tncm91bmRDb250ZXh0LmZpbGxSZWN0KDAsIDAsIGJhY2tncm91bmQud2lkdGgsIGJhY2tncm91bmQuaGVpZ2h0KTtcblxuLyogTWFpbiBwYXRoIHdpbGwgZ28gZnJvbSBbMCwgNTAwXSwgWzc1LCA1MDBdLCBbNzUsIDEwMF0sIFsyMjUsIDEwMF0sIFsyMjUsIDUwMF0sIFszNzUsIDUwMF0sIFszNzUsIDEwMF0sIFs1MjUsIDEwMF0sIFs1MjUsIDUwMF0sIFs2NzUsIDUwMF0sIFs2NzUsIDEwMF0sIFs4MjUsIDEwMF0sIFs4MjUsIDUwMF0sIFs5MDAsIDUwMF0gKi9cblxuLy8gRHJhd2luZyB0aGUgcGF0aCAtIHdpZHRoIG9mIHRoZSBwYXRoIGlzIDUwcHhcbmJhY2tncm91bmRDb250ZXh0LmZpbGxTdHlsZSA9IHNldHRpbmdzLnBhdGhDb2xvcjtcblxuYmFja2dyb3VuZENvbnRleHQuYmVnaW5QYXRoKCk7XG5cbi8vIEZvciB0aGUgYm90dG9tIHBhcnQgb2YgdGhlIHBhdGhcbmJhY2tncm91bmRDb250ZXh0Lm1vdmVUbygwLCA1MjUpO1xuXG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oMTAwLCA1MjUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDEwMCwgMTI1KTsgLy8gVG9wXG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oMjAwLCAxMjUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDIwMCwgNTI1KTsgLy8gQm90dG9tXG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oNDAwLCA1MjUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDQwMCwgMTI1KTsgLy8gVG9wXG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oNTAwLCAxMjUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDUwMCwgNTI1KTsgLy8gQm90dG9tXG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oNzAwLCA1MjUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDcwMCwgMTI1KTsgLy8gVG9wXG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oODAwLCAxMjUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDgwMCwgNTI1KTsgLy8gQm90dG9tXG5cbi8vTWlkZGxlIHNlY3Rpb24gdG8gdGhlIHNpZGVcbmJhY2tncm91bmRDb250ZXh0LmxpbmVUbyg5MDAsIDUyNSk7XG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oOTAwLCA0NzUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDg1MCwgNDc1KTtcblxuLy8gRm9yIHRoZSB0b3AgcGFydCBvZiB0aGUgcGF0aFxuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDg1MCwgNzUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDY1MCwgNzUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDY1MCwgNDc1KTtcbmJhY2tncm91bmRDb250ZXh0LmxpbmVUbyg1NTAsIDQ3NSk7XG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oNTUwLCA3NSk7XG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oMzUwLCA3NSk7XG5iYWNrZ3JvdW5kQ29udGV4dC5saW5lVG8oMzUwLCA0NzUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDI1MCwgNDc1KTtcbmJhY2tncm91bmRDb250ZXh0LmxpbmVUbygyNTAsIDc1KTtcbmJhY2tncm91bmRDb250ZXh0LmxpbmVUbyg1MCwgNzUpO1xuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDUwLCA0NzUpO1xuXG4vLyBFbmQgc2VjdGlvblxuYmFja2dyb3VuZENvbnRleHQubGluZVRvKDAsIDQ3NSk7XG5cbmJhY2tncm91bmRDb250ZXh0LmZpbGwoKTtcbi8vIGJhY2tncm91bmRDb250ZXh0LmxpbmVUbygpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9qcy9iYWNrZ3JvdW5kLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gSW5pdGlhdGUgYWxsIHRoZSBjb21wb25lbnRzXG52YXIgVG93ZXIgPSByZXF1aXJlKFwiLi9jbGFzc2VzL1Rvd2VyLmpzXCIpLFxuICAgIEdhbWVFbmdpbmUgPSByZXF1aXJlKFwiLi9jbGFzc2VzL0dhbWUuanNcIiksXG4gICAgZ2FtZSA9IG5ldyBHYW1lRW5naW5lO1xuXG5cbi8vIEhFUkUgSVMgQUxMIFRIRSBJTlRFUkFDVElPTiBFVkVOVCBMSVNURU5FUlNcblxuLyogPT09PT09PT09PT09PT0gT24gc3RhcnQgY2xpY2sgaGFuZGxlcnMgPT09PT09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG4vLyBPbiBzdGFydCwgY3JlYXRlIGEgZ2FtZSBlbGVtZW50IC0gdGhlc2UgZXZlbnQgbGlzdGVuZXJzIHdpbGwgYmUgZGVzdHJveWVkIHdoZW4gdGhlIGNvbnRhaW5lciBpcyBvdmVycmlkZW5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhcnQtYnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAvLyBIaWRlcyB0aGUgbW9kYWwgbGlnaHRib3hcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWwtY29udGVudFwiKVswXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsLWJhY2tncm91bmRcIilbMF0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufSk7XG5cbi8vIE9uIGNsaWNraW5nIHRoZSBpbmZvcm1hdGlvbiBidXR0b24sIHNob3cgdGhlIGluZm9ybWF0aW9uIHBhbmVsXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZm9ybWF0aW9uLWJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coXCJzaG93IGluZm9ybWF0aW9uIGNvbnRhaW5lciBoZXJlXCIpO1xufSk7XG5cbi8qID09PT09PT09IEluZm9ybWF0aW9uIGNvbnRhaW5lciBpbnRlcmFjdGlvbnMgPT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG5cbi8qID09PT09PT09PT09PT09PT09IEluZm9ybWF0aW9uIEhvdmVyID09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8vIFNob3dzIGluZm9ybWF0aW9uIGFib3V0IHRvd2VycyBvciBtb25zdGVycyBpZiBob3ZlcmVkIG92ZXJcbi8vIG9yIGFjdGl2ZVxuXG4vLyBHZXQgaW5mb3JtYXRpb24gZnJvbSB0b3dlcmRhdGEuanNcblxuLyogPT09PT09PT09PSBUb3dlciBDYXJkIENsaWNrIGFuZCBwbGFjZW1lbnRzID09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuLy8gQ2xpY2sgYSB0b3dlciBjYXJkIGFuZCBtYWtlIFwiYWN0aXZlXCIgd2hpY2ggY2FuIGJlIHBsYWNlZCBvbiBVSSBlbGVtZW50XG4vLyBXaGlsZSBpdCBpcyBhY3RpdmUgLSB1c2UgI2R5bmFtaWMub25tb3VzZW1vdmUgPSBmdW5jdGlvbiAtPiB0byBTZW5kXG4vLyBpbmZvcm1hdGlvbiB0byB0aGUgY2FudmFzXG5cbi8vIHNldCB1cCBldmVudCBsaXN0ZW5lcnMgYXQgdGhlIHN0YXJ0IHdoaWNoIHJlZmVyZW5jZSBmdW5jdGlvbnMgLSB0aGVzZSBmdW5jdGlvbnMgZGVwZW5kIG9uIHRoZSBzdGF0ZSBvbiB0aGUgYXBwbGljYXRpb24gdG8gY29udHJvbCB0aGVpciBjb250cm9sIGZsb3dcbnZhciBhY3RpdmVUb3dlclNlbGVjdGVkID0gbnVsbDtcbmZ1bmN0aW9uIHRvd2VyQ2FyZENsaWNrKCkge1xuXG4gICAgdmFyIHRvd2VyTmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS10b3dlclwiKTtcbiAgICAvLyBOT1RFICBhZGQgYWN0aXZlIGNsYXNzIHRvIGFjdGl2ZSBlbGVtZW50XG5cbiAgICBpZiAoL2Rpc2FibGVkL2kudGVzdCh0aGlzLmNsYXNzTmFtZSkpIHsgLy8gVG93ZXIgaXMgZGlzYWJsZWRcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoYWN0aXZlVG93ZXJTZWxlY3RlZCA9PT0gbnVsbCkgeyAvLyBUaGVyZSBpcyBubyBhY3RpdmUgdG93ZXIgYmVpbmcgcGxhY2VkXG4gICAgICAgIC8vIHNldCB0aGUgYWN0aXZlIHRvd2VyIHNlbGVjdGVkIHRvIGJlIHRoZSB0b3dlciBuYW1lXG4gICAgICAgIC8vIFNldCB1cCBhY3RpdmUgZWxlbWVudHNcbiAgICAgICAgYWN0aXZlVG93ZXJTZWxlY3RlZCA9IHRvd2VyTmFtZTtcbiAgICAgICAgLy8gTk9URSBhZGQgYWN0aXZlIGNsYXNzIHRvIHRvd2VyIGNsaWNrZWRcbiAgICB9IGVsc2UgaWYgKGFjdGl2ZVRvd2VyU2VsZWN0ZWQgPT09IHRvd2VyTmFtZSkgeyAvLyBUaGUgdG93ZXIgY2FyZCBjbGlja2VkIGlzIHRoZSBzYW1lIGFzIHRoZSBhY3RpdmUgdG93ZXJcbiAgICAgICAgY2FuY2VsVG93ZXJQbGFjZW1lbnQoKTtcbiAgICB9IGVsc2UgeyAvLyBUaGVyZSBpcyBhbiBhY3RpdmUgdG93ZXIgd2hpY2ggaXMgbm90IHRoZSBzYW1lIGFzIHdoYXQgd2FzIGNsaWNrZWRcbiAgICAgICAgLy8gTk9URSByZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gcHJldmlvdXMgdG93ZXJgXG4gICAgICAgIGFjdGl2ZVRvd2VyU2VsZWN0ZWQgPSB0b3dlck5hbWU7XG4gICAgICAgIC8vIE5PVEUgYWRkIGFjdGl2ZSBjbGFzcyB0byBjbGlja2VkIHRvd2VyIGNhcmRcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9uVG93ZXJNb3VzZU1vdmVtZW50KGUpIHtcbiAgICBpZiAoYWN0aXZlVG93ZXJTZWxlY3RlZCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm5cbiAgICB9O1xuICAgIHZhciBjYW52YXNDb250YWluZXIgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBvZmZzZXRYID0gZS5jbGllbnRYIC0gY2FudmFzQ29udGFpbmVyLmxlZnQsXG4gICAgICAgIG9mZnNldFkgPSBlLmNsaWVudFkgLSBjYW52YXNDb250YWluZXIudG9wO1xuICAgIC8vIHNlbmQgdG8gZGlzcGxheSB0byBnZXQgcmVuZGVyZWRcbn07XG5cbmZ1bmN0aW9uIHRvd2VyUGxhY2VtZW50KGUpIHtcbiAgICBpZiAoYWN0aXZlVG93ZXJTZWxlY3RlZCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRvd2VyTmFtZSA9IGFjdGl2ZVRvd2VyU2VsZWN0ZWQsIC8vIE5PVEUgQ0hBTkdFIEdFVCBUT1dFUiBOQU1FIEZST00gTElTVFxuICAgICAgICBjYW52YXNDb250YWluZXIgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICBwb3NpdGlvbiA9IHt9O1xuXG4gICAgcG9zaXRpb24ueCA9IGUuY2xpZW50WCAtIGNhbnZhc0NvbnRhaW5lci5sZWZ0O1xuICAgIHBvc2l0aW9uLnkgPSBlLmNsaWVudFkgLSBjYW52YXNDb250YWluZXIudG9wO1xuXG4gICAgaWYgKGdhbWUudmFsaWRhdGVUb3dlclBsYWNlbWVudCh0b3dlck5hbWUsIHBvc2l0aW9uKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInRvd2VyUGxhY2VkXCIpO1xuICAgICAgICBnYW1lLmFkZFRvd2VyKHRvd2VyTmFtZSwgcG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW52YWxpZCB0b3dlciBwbGFjZW1lbnRcIik7XG4gICAgICAgIC8vIHNob3cgZXJyb3IgbWVzc2FnZSBzb21ld2hlcmUgZm9yIHRoZSB1c2VyXG4gICAgfVxuICAgIGFjdGl2ZVRvd2VyU2VsZWN0ZWQgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxUb3dlclBsYWNlbWVudCgpIHtcbiAgICAvLyBOT1RFIHJlbW92ZSBhY3RpdmUgdG93ZXIgY2FyZFxuICAgIGFjdGl2ZVRvd2VyU2VsZWN0ZWQgPSBudWxsO1xufVxuXG5cbi8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnNcbnZhciB0b3dlckNhcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRvd2VyLWNhcmRcIik7XG4vLyBDb252ZXJ0IGZyb20gbm9kZWxpc3QgdG8gYXJyYXlcbnRvd2VyQ2FyZHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0b3dlckNhcmRzKTtcblxuLy8gVG93ZXIgY2FyZCBjbGljayBldmVudCBsaXN0ZW5lcnNcbnRvd2VyQ2FyZHMubWFwKGZ1bmN0aW9uKHRvd2VyQ2FyZCkge1xuICAgIHRvd2VyQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG93ZXJDYXJkQ2xpY2spO1xufSk7XG5cbi8vIEdhbWUgY29udGFpbmVyIGV2ZW50IGxpc3RlbmVyc1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkeW5hbWljXCIpLm9ubW91c2Vtb3ZlID0gb25Ub3dlck1vdXNlTW92ZW1lbnQ7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR5bmFtaWNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvd2VyUGxhY2VtZW50KTtcblxuLy8gVG93ZXIgcGxhY2VtZW50IGNhbmNlbGxpbmcgZXZlbnQgbGlzdGVuZXJzXG5kb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgY2FuY2VsVG93ZXJQbGFjZW1lbnQoKTtcbiAgICB9XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2pzL2ludGVyZmFjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBUb3dlciA9IGZ1bmN0aW9uKGRhbWFnZSwgc3BlZWQsIHJhbmdlLCB0eXBlLCBlZmZlY3QsIHBvc2l0aW9uKSB7XG4gICAgdGhpcy5kYW1hZ2UgPSBkYW1hZ2U7XG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkOyAvLyBBdHRhY2sgc3BlZWRcbiAgICB0aGlzLnJhbmdlID0gcmFuZ2U7IC8vIFJhbmdlIG9mIHRoZSB0b3dlclxuICAgIHRoaXMudHlwZSA9IHR5cGU7IC8vIFR5cGUgb2YgZGFtYWdlXG4gICAgdGhpcy5lZmZlY3QgPSBlZmZlY3Q7IC8vIFNwZWNpYWwgZWZmZWN0IChlLmcuIHNsb3csIHNwbGFzaCwgZXRjKVxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjsgLy8gb2JqZWN0IHdpdGggeCBhbmQgeSBjb29yZGluYXRlcyAtIHNob3VsZCBub3QgY2hhbmdlXG59XG4vLyBNZXRob2QgdGhlIGdhbWUgb2JqZWN0IHVzZXMgdG8gcnVuIHRvd2Vyc1xuVG93ZXIucHJvdG90eXBlLnJ1bkN5Y2xlID0gZnVuY3Rpb24oKSB7XG5cbn1cbi8vIGNoYW5nZSB0aGlzIHRvIHJlZmVyZW5jZSBhIGxpc3Qgb3Igc29tZXRoaW5nIHdoZXJlIGEgbmFtZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIHByb3BlcnRpZXNcbi8vIFRha2VzIGluIGEgbW9uc3RlcidzIHBvc2l0aW9uIGFuZCBjaGVja3Mgd2hldGhlciB0aGF0IGlzIGluIHJhbmdlIGJhc2VkIG9uIHRoZSByYW5nZSAtIHJldHVybnMgdHJ1ZSBvciBmYWxzZSBpZiBpbiByYW5nZSB3aGljaCBjYW4gYmUgdXNlZCB0b1xuVG93ZXIucHJvdG90eXBlLmNoZWNrSW5SYW5nZSA9IGZ1bmN0aW9uKG1vbnN0ZXJQb3NpdGlvbikge1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gVG93ZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2pzL2NsYXNzZXMvVG93ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgR2FtZUVuZ2luZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudXNlckdvbGQgPSAxMDtcbiAgICB0aGlzLmxldmVsID0gMTtcbiAgICB0aGlzLnVzZXJMaXZlcyA9IDMwO1xuICAgIHRoaXMuYWN0aXZlTW9uc3RlcnMgPSB7fTsgLy8gTGlzdCBvZiBhY3RpdmUgbW9uc3RlcnMgaW4gdGhlXG4gICAgdGhpcy50b3dlcnMgPSB7fTsgLy8gb2JqZWN0IG9mIHRvd2VyIG9iamVjdHNcblxuICAgIC8vIEdvZXMgdGhyb3VnaCBhbmQgZGlzYWJsZXMgdG93ZXJzIHRoYXQgY2FuJ3QgYmUgdXNlZCB5ZXRcbn1cblxuR2FtZUVuZ2luZS5wcm90b3R5cGUuYWRkTW9uc3RlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAvLyBhZGQgbW9uc3RlciAoc3BlY2lmaWVkIGJ5IG5hbWUpIHRvIGdhbWVcbn1cblxuR2FtZUVuZ2luZS5wcm90b3R5cGUuYWRkVG93ZXIgPSBmdW5jdGlvbihuYW1lLCBwb3NpdGlvbikge1xuICAgIC8vIGFkZCB0b3dlciAoc3BlY2lmaWVkIGJ5IG5hbWUpIGF0IGxvY2F0aW9uXG59XG5cbi8vIG1ldGhvZCB0byBjaGVjayBnb2xkIGJlZm9yZSBwbGFjZSB0b3dlciBvciB1cGdyYWRlXG5HYW1lRW5naW5lLnByb3RvdHlwZS5jaGVja0dvbGQgPSBmdW5jdGlvbihnb2xkQ29zdCkge1xuICAgIGlmIChnb2xkQ29zdCA+IHRoaXMudXNlckdvbGQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbkdhbWVFbmdpbmUucHJvdG90eXBlLmdhbWVPdmVyID0gZnVuY3Rpb24oKSB7XG5cbn1cblxuR2FtZUVuZ2luZS5wcm90b3R5cGUuZ2FtZVdvbiA9IGZ1bmN0aW9uKCkge1xuXG59XG5cbi8vIE5ldyBsZXZlbCBtZXRob2RcbkdhbWVFbmdpbmUucHJvdG90eXBlLm5leHRMZXZlbCA9IGZ1bmN0aW9uKCkge1xuXG59XG5cbkdhbWVFbmdpbmUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIHNlbmQgc3RhdGUgdG8gdGhlIGRpc3BsYXkgb2JqZWN0IHRvIHJlbmRlclxufTtcblxuR2FtZUVuZ2luZS5wcm90b3R5cGUucnVuQ3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBsb29wIHRocm91Z2ggYWN0aXZlIG1vbnN0ZXJzIGFuZCB0b3dlcnMgYW5kIHJ1biB0aGUgY3ljbGVcbiAgICAvLyBFYWNoIHJ1bkN5Y2xlIG1ldGhvZCByZXR1cm5zIGluZm9ybWF0aW9uIGZvciB0aGUgZ2FtZUVuZ2luZSB0b1xuICAgIC8vIHByb2Nlc3MgKGUuZy4gdGhlIG1vbnN0ZXIgZGllZCwgdG93ZXIgY2hhbmdlZClcblxuICAgIC8vIGxvb3AgYW5kIGNoZWNrIGRlYXRoIG9mIG1vbnN0ZXJzIC0gdXBkYXRlIGFjY29yZGluZ2x5XG5cbiAgICAvLyBTZW5kIGluZm9ybWF0aW9uIHRvIHJlbmRlclxufVxuXG4vLyBtZXRob2QgdG8gdXBncmFkZSB0b3dlclxuXG5HYW1lRW5naW5lLnByb3RvdHlwZS52YWxpZGF0ZVRvd2VyUGxhY2VtZW50ID0gZnVuY3Rpb24obmFtZSwgcG9zaXRpb24pIHtcbiAgICAvLyByZXR1cm5zIHRydWUgb3IgZmFsc2Ugd2hldGhlciB0b3dlciBwbGFjZW1lbnQgaXMgdmFsaWRcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gcmVkcmF3IGNhbnZhc1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVFbmdpbmU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2pzL2NsYXNzZXMvR2FtZS5qc1xuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=